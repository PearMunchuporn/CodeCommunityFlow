@model CodeCommunityFlow.ViewModels.QuestionViewModel

@{
    ViewBag.Title = "Question";
}
<tr>
    <td><span class="badge badge-customVoteCount">@Model.VotesCount </span>@(Model.VotesCount > 1 ? " Votes" : " Vote")</td>
    <td><span class="badge badge-AnswersCount">@Model.AnswersCount </span>@(Model.AnswersCount > 1 ? " Answers" : " Answer")</td>
    <td><span class="badge badge-ViewsCount">@Model.ViewsCount </span>@(Model.ViewsCount > 1 ? " Views" : " View")</td>
    <td>
        <a href="/Questions/View/@Model.QuestionID">@Model.QuestionName</a> <br />
        <span class="badge badge-category">@Model.Categories.CatagoryName</span>
    </td>

    <td>
        @if (Convert.ToInt32(Session["CurrentUserID"]) != Model.UserID)
        {
            <a href="/UserProfile/@Model.UserID"><p class="text-name">by @Model.Users.UserName</p></a>
        }
        else
        {
            <a href="/UserDetails/@Model.UserID">
                <p class="text-name">by you</p>
            </a>
        }
    </td>

    <td class="text-muted">@Model.QuestionDateTime</td>



    @if (Convert.ToInt32(Session["CurrentUserID"]) == Model.UserID)
    {

        <td> <a href="/EditQuestion/@Model.QuestionID" class="btn btn-sm btn-warning">Edit</a></td>

        <td>
            <button type="button" class="btn btn-sm btn-danger"
                    data-toggle="modal"
                    data-target="#deleteQuestionModal"
                    data-question-id="@Model.QuestionID">
                Delete
            </button>
        </td>

    }


</tr>



<!-- Delete Confirmation Modal -->

<div class="modal fade" id="deleteQuestionModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form id="deleteForm" method="post">
                @Html.AntiForgeryToken()
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete your question?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </form>
        </div>
    </div>
</div>


<script>
    $(document).on('click', '[data-toggle="modal"][data-target="#deleteQuestionModal"]', function () {
        var questionId = $(this).data('question-id');
        $('#deleteForm').attr('action', '/Questions/DeleteQuestion/' + questionId);
    });

</script>